(function(n,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("react"),require("react-dom"),require("angular")):"function"==typeof define&&define.amd?define(["react","react-dom","angular"],function(e,r,angular){return n.ngReact=t(e,r,angular)}):n.ngReact=t(n.React,n.ReactDOM,n.angular)})(this,function(React,n,angular){"use strict";function t(n,t){if(angular.isFunction(n))return n;if(!n)throw Error("ReactComponent name attribute must be specified");var e;try{e=t.get(n)}catch(r){}if(!e)try{e=n.split(".").reduce(function(n,t){return n[t]},window)}catch(r){}if(!e)throw Error("Cannot find react component "+n);return e}function e(n,t){if(n.wrappedInApply)return n;var e=function(){var e=arguments,r=t.$root.$$phase;return"$apply"===r||"$digest"===r?n.apply(null,e):t.$apply(function(){return n.apply(null,e)})};return e.wrappedInApply=!0,e}function r(n,t){return Object.keys(n||{}).reduce(function(r,o){var c=n[o];return r[o]=angular.isFunction(c)?e(c,t):c,r},{})}function o(n,t,e,r){"collection"===n&&angular.isFunction(t.$watchCollection)?e.forEach(function(n){t.$watchCollection(n,r)}):"reference"===n?angular.isFunction(t.$watchGroup)?t.$watchGroup(e,r):e.forEach(function(n){t.$watch(n,r)}):e.forEach(function(n){t.$watch(n,r,!0)})}function c(t,e,r,o){r(function(){n.render(React.createElement(t,e),o[0])})}var u=function(e,u){return{restrict:"E",replace:!0,link:function(i,a,f){var p=t(f.name,u),l=function(){var n=i.$eval(f.props),t=r(n,i);c(p,t,e,a)};f.props?o(f.watchDepth,i,[f.props],l):l(),i.$on("$destroy",function(){n.unmountComponentAtNode(a[0])})}}},i=function(e,u){return function(i,a,f,p){var l={restrict:"E",replace:!0,link:function(p,l,d){var s=t(i,u);f=f||Object.keys(s.propTypes||{});var m=function(){var n=a||{};f.forEach(function(t){d.hasOwnProperty(t)&&(n[t]=p.$eval(d[t]))}),c(s,r(n,p),e,l)},$=f.map(function(n){return d[n]});o(d.watchDepth,p,$,m),m(),p.$on("$destroy",function(){n.unmountComponentAtNode(l[0])})}};return angular.extend(l,p)}};return angular.module("react",[]).directive("reactComponent",["$timeout","$injector",u]).factory("reactDirective",["$timeout","$injector",i])});